def book_list_view(library):
    if not library:
        print('В библиотеке нет книг')
        return
    for title in library:
        print(title)


def add_book(library, title, author, year):
    if title in library:
        print(f'\nКнига с названием "{title}" уже существует.')
        update = input('Обновить информацию о книге? (да/нет)')
        if update == 'да':
            library[title] = {'author': author, 'year': year, 'availability': 'none' }
            print(f'Информамция о книге "{title}" обновлена.\n')
        else:
            print('Информация о книге не изменилась.\n')
    else:
        library[title] = {'author': author, 'year': year, 'availability': 'none'}
        print(f'\nДобавлена книга: {title}\n')
    book_list_view(library)


def remove_book(library, title):
    if title in library:
        del library[title]
        print(f'\nКнига {title} была удалена из библиотеки.\n')
    else:
        print(f'\nКнига {title} не найдена.\n')
    book_list_view(library)


def issue_book(library):
    title = input('Введите название книги: ')
    if title not in library:
        print(f'\nКнига {title} не найдена.\n')
        return
    availability = library[title]['availability']
    if availability == 'true':
        library[title]['availability'] = 'false'
        print(f'\nКнига {title} выдана')
    elif availability == 'none':
        print(f'\nКнига {title} еще не инвентаризирована')
    elif availability == 'false':
        print(f'\nКнига {title} уже выдана')


def return_book(library, title):
    if title not in library:
        print('В библиотеке нет книг')
        return
    availability = library[title]['availability']
    if availability == 'false':
        library[title]['availability'] = 'true'
        print(f'\nКнига {title} возвращена в библиотеку.\n')
    else:
        print(f'\nКнига "{title}" уже находится в библиотеке.\n')


def find_book(library):
    if not library:
        print('В библиотеке нет книг')
        return
    find = input('Введите название книги: ')
    if find in library:
        availability = library[find]['availability']
        if availability == 'none':
            print(f'Книга "{find}" есть в библиотеке, но ее статус не определен.')
        elif availability == 'false':
            print(f'Книга "{find}" выдана')
        elif availability == 'true':
            print(f'Книга "{find}" доступна')
    else:
        print(f'Книга "{find}" не найдена в библиотеке.')


def library_menu():
    password = 'flugergehaimer'
    print('Добро пожаловать в нашу библиотеку.')
    while True:
        enter = input('Выбирите из списка действие которое хотите совершить.'
                  '\n1 - Просмотреть список книг из библиотеки.'
                  '\n2 - Поиск книг по названию.'
                  '\n3 - Получить книгу'
                  '\n4 - Вернуть книгу'
                  '\n5 - Добавить книгу(только для сотрудников библиотеки)'
                  '\n6 - Удалить книгу(только для сотрудников библиотеки)'
                  '\n7 - Выйти'
                  '\n Нажмите на цифру пункта меню: ')
        if enter == '1':
            book_list_view(library)
        elif enter == '2':
            find_book(library)
        elif enter == '3':
            issue_book(library)
        elif enter == '4':
            return_book(library, title= input('Введите название книги: '))
        elif enter == '5':
            enter_password = input('Введите пароль: ')
            if enter_password == password:
                add_book(library,'Horus Rising', 'Den Abnet', '2006')
            else:
                print('Пароль неверный')
        elif enter == '6':
            enter_password = input('Введите пароль: ')
            if enter_password == password:
                remove_book(library, title=input('Введите название книги'))
            else:
                print('Пароль неверный')
        elif enter == '7':
            print('Выход из программы.')
            break
        else:
            print('Неверный ввод, попробуйте снова')


library = {
    'Horus Rising': {
        'author': 'new author',
        'year': '2006',
        'availability': 'true'
    },
    'False gods': {
        'author': 'Graham McNeill',
        'year': '2006',
        'availability': 'true'
    },
    'Galaxy in Flames': {
        'author': 'Ben Counter',
        'year': '2006',
        'availability': 'true'
    },
}


library_menu()
